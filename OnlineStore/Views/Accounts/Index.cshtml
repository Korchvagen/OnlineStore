@model IEnumerable<OnlineStore.BLL.ViewModels.Account.AccountViewModel>

@{
    var adminRole = OnlineStore.DAL.Enum.UserRole.Admin;
}

<div id="usersContainer">
    <h2>Users</h2>
    <table id="usersTable">
        <thead>
            <tr id="theadTr">
                <th>
                    @Html.DisplayNameFor(model => model.Login)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Status)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Role)
                </th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                if (item.Id == 1 || item.Login == User.Identity.Name)
                {
                    continue;
                }
                if (item.Role == adminRole)
                {
                    <tr class="adminTr">
                        <td>
                            @Html.DisplayFor(modelItem => item.Login)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            <input class="currentRole" type="hidden" value="@item.Role" />
                            <select class="selectedRole">
                                @if (item.Role == adminRole)
                                {
                                    <option value="Admin" selected>Admin</option>
                                    <option value="User">User</option>
                                }
                                else
                                {
                                    <option value="Admin">Admin</option>
                                    <option value="User" selected>User</option>
                                }
                            </select>
                        </td>
                        <td>
                            <button class="changeRoleBtn btn btn-dark" value="@item.Id">Save</button>
                        </td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Login)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            <input class="currentRole" type="hidden" value="@item.Role" />
                            <select class="selectedRole">
                                @if (item.Role == adminRole)
                                {
                                    <option value="Admin" selected>Admin</option>
                                    <option value="User">User</option>
                                }
                                else
                                {
                                    <option value="Admin">Admin</option>
                                    <option value="User" selected>User</option>
                                }
                            </select>
                        </td>
                        <td>
                            <button class="changeRoleBtn btn btn-dark" value="@item.Id">Save</button>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>